<!DOCTYPE html>
<html>
  <head>
    <!-- meta information -->
<meta charset="utf-8">
<meta name="description" 
      content="As a kid, I spent a lot of time playing flash games online. One of my jobs this summer was converting a flash based d..." >
<meta name="author" content="">

<!-- Enable responsiveness on mobile devices-->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<!-- title -->
<title>Javascript Snake &middot; </title>

<!-- icons -->
<link rel="shortcut icon" href="/public/images/favicon.ico" />

<!-- stylesheets -->
<link rel="stylesheet" href="/public/css/responsive.gs.12col.css">
<link rel="stylesheet" href="/public/css/animate.min.css">
<link rel="stylesheet" href="/public/css/main.css">

<!-- Google fonts -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic&subset=latin-ext">



<!-- feed links -->
<link rel="alternate" href="/feed.xml" type="application/rss+xml" title="">

  </head>
  <body>
    <div class="container azul">
      <header class="top row gutters">
        <div class="col span_2 center">
          <!-- TODO: add baseurl to the logo link -->
          <a href="" id="logo" title=""
             style="background-image: url(/public/images/logo.png);"></a>
        </div>
        <nav class="col span_10 top-navbar">
  
</nav>

      </header>

      <article class="single row gutters">
  <time class="published" datetime="2014-03-27">27 March 2014</time>
  <h2>Javascript Snake</h2>

  <p>As a kid, I spent a lot of time playing flash games online. One of my jobs this summer was converting a flash based dashboard to an iOS friendly one based on Javascript and SVG and it got me thinking– can we expect more and more of the addicting games on sites like MiniClip or Armor Games to similarly move away from flash?  After all, it does seem like the iOS market share is only expanding.</p>

<p>To take a stab at the questions I wrote a basic implementation of the game Snake using Javascript with the d3 library. You can check it out the project here . Below, I’m going to briefly cover some of the lessons I’ve learned.</p>

<ol>
<li><p>It was a bit of a leap for me to start thinking about the snake as just a Javascript array. In my mind I had assumed that I would need a separate head and then a separate set of body chunk that together make the snake. Once I began to look at the snake this way I could then address the issue of…</p></li>
<li><p>Speed. I was worried that constantly redrawing the snake between every frame would slow down the browser and possibly cause bugs if the redraws took more time than the scheduled step size (2oo ms) between every movement. However, representing the snake as an array allowed me to take a shortcut. Instead of redrawing the whole snake every time, I could just move the last piece of the snake to the the new position. This worked out especially well for food, as I could just convert a food block to a snake class and it would join the rest.</p></li>
<li><p>The trickiest bit of this whole endeavor was self collision detection. In a previous matlab game I wrote, I relied on checking the pixel colors as an indication of what I was dealing with. However, as far as I know, the d3 library does all sorts of wonderful things to manipulate SVG but there is no function to return the color of a specific pixel coordinate. Unfortunately, javascript also can’t natively test for equality between objects or arrays. Instead, I had to use the for each function to test my snake elementwise like this:</p></li>
</ol>

<div class="highlight"><pre><code class="javascript"><span class="nx">snake</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">snake</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">score</span><span class="p">,</span><span class="nx">snake</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span>
<span class="k">if</span><span class="p">(</span>
<span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="nx">snake</span><span class="p">[</span><span class="nx">snake</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="nx">snake</span><span class="p">[</span><span class="nx">snake</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
<span class="p">){</span>
<span class="nx">end_game</span><span class="p">();</span>
<span class="p">}</span>
<span class="p">})</span>
</code></pre>
</div>

<p>I haven’t tested this for the larger lengths of the snake but performance at the levels I attained weren’t impacted.</p>

<p>Every programming project is a wonderful exercise in problem solving– I’m glad I was able to relax and work out the kinks of this!</p>

</article>


      <footer>
        <p>
          Powered by <a href="http://jekyllrb.com/">Jekyll</a> and styled with <a href="https://github.com/aigarsdz/brume"> brume.</a>
        </p>
      </footer>
    </div>

    <!-- scripts -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/public/js/jquery.fitvids.js"></script>
    <script>
      $(document).ready(function(){
        $("article").fitVids();
      });
    </script>
  </body>
</html>
